<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Lyrics-Based Search Ranking | Ayush Shah</title>
  <meta name="color-scheme" content="dark light" />
  <meta name="description" content="Evaluating retrieval and ranking models for lyrics-based search: BM25, TF-IDF, LSA, and Siamese BERT on a 50k-song corpus with MAP/NDCG evaluation." />

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter','system-ui','ui-sans-serif','Segoe UI','Roboto','Arial'],
            display: ['Space Grotesk','Inter','ui-sans-serif']
          },
          colors: {
            base: { 50:'#f9fafb',100:'#f3f4f6',900:'#0b0d12' },
            brand:{ 100:'#e0e7ff',300:'#a5b4fc',500:'#6366f1',600:'#5457ee',700:'#4f46e5' },
            accent:{ 500:'#22d3ee',600:'#06b6d4' }
          },
          boxShadow: {
            soft: '0 10px 40px -12px rgba(0,0,0,.35)',
            glow: '0 0 0 3px rgba(34, 211, 238, .25)'
          },
          backdropBlur: { 12: '12px' }
        }
      }
    }
  </script>

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css"/>

  <style>
    :root{
      --ac1:#41e2ff; --ac2:#9b8cff; --ac3:#00ffa8; --ac4:#ff7ca3;
      --text-soft:#cfd6e6;
    }
    body{
      background:
        radial-gradient(1200px 600px at 60% -10%, color-mix(in srgb, var(--ac2) 18%, transparent), transparent),
        radial-gradient(1000px 500px at 10% 10%, color-mix(in srgb, var(--ac1) 15%, transparent), transparent),
        linear-gradient(180deg, #090a0f 0%, #0b0e14 50%, #0a0d12 100%);
      color:#fff;
    }
    .progress{
      position:fixed;top:0;left:0;height:3px;width:0;z-index:70;
      background:linear-gradient(90deg,var(--ac1),var(--ac3));
      box-shadow:0 0 12px color-mix(in srgb,var(--ac3) 60%,transparent)
    }
    .aurora{
      pointer-events:none;position:absolute;inset:-10% -20% auto -20%;
      height:48vh;filter:blur(18px) saturate(120%);
      background:
        radial-gradient(600px 220px at 15% 70%, color-mix(in srgb, var(--ac1) 22%, transparent), transparent),
        radial-gradient(540px 220px at 45% 35%, color-mix(in srgb, var(--ac2) 18%, transparent), transparent),
        radial-gradient(520px 240px at 80% 60%, color-mix(in srgb, var(--ac4) 16%, transparent), transparent);
      animation: auroraFloat 18s ease-in-out infinite alternate;
      opacity:.75;mix-blend-mode:screen
    }
    @keyframes auroraFloat {0%{transform:translateY(0)}100%{transform:translateY(-18px)}}
    .blob{
      position:absolute;filter:blur(40px);opacity:.28;mix-blend-mode:screen;
      animation:blob 16s ease-in-out infinite
    }
    .blob:nth-child(1){
      width:520px;height:520px;
      background:radial-gradient(35% 35% at 50% 50%, color-mix(in srgb, var(--ac1) 65%, transparent), transparent);
      left:-8%;top:-6%
    }
    .blob:nth-child(2){
      width:420px;height:420px;
      background:radial-gradient(35% 35% at 50% 50%, color-mix(in srgb, var(--ac3) 60%, transparent), transparent);
      right:-6%;top:32%;animation-delay:-7s
    }
    @keyframes blob{0%,100%{transform:translate3d(0,0,0)}50%{transform:translate3d(0,-30px,0)}}
    .sheen{
      position:absolute;inset:0;border-radius:inherit;mix-blend-mode:screen;
      opacity:0;
      background:linear-gradient(75deg,rgba(255,255,255,0),rgba(255,255,255,.09),rgba(255,255,255,0));
      background-size:200% 100%;
      transition:opacity .3s ease,background-position .6s ease
    }
    .tilt{
      transform-style:preserve-3d;perspective:900px;
      transition:transform .18s ease
    }
    .tilt:hover .sheen{opacity:.9;background-position:-100% 0}
    .spotlight{position:relative;overflow:hidden}
    .spotlight::after{
      content:"";position:absolute;width:260px;height:260px;border-radius:50%;
      background:radial-gradient(closest-side,rgba(255,255,255,.14),rgba(255,255,255,0));
      filter:blur(10px);transform:translate(-50%,-50%);
      left:var(--sx,-9999px);top:var(--sy,-9999px);
      pointer-events:none;opacity:0;transition:opacity .2s ease
    }
    .spotlight:hover::after{opacity:1}
    .magnetic{
      position:relative;transform:translate3d(0,0,0);
      transition:transform .08s ease;will-change:transform
    }
    .dot{
      width:8px;height:8px;border-radius:9999px;
      background:#394150;
      transition:transform .2s ease,background .2s ease
    }
    .dot.active{
      background:var(--ac1);transform:scale(1.25);
      box-shadow:0 0 0 4px rgba(65,226,255,.1)
    }
    .cursor{
      position:fixed;width:10px;height:10px;border-radius:50%;
      background:radial-gradient(circle at 30% 30%,var(--ac2),var(--ac1));
      opacity:.35;filter:blur(1px);transform:translate(-50%,-50%);
      pointer-events:none;z-index:60
    }
    html:not(.dark) body{
      background:
        radial-gradient(900px 420px at 70% -10%, rgba(155,140,255,0.14), transparent 60%),
        radial-gradient(900px 420px at 0% 0%, rgba(65,226,255,0.10), transparent 60%),
        linear-gradient(180deg, #f7fafc 0%, #eef2f7 50%, #eaf0f6 100%);
      color:#0f172a;
    }
    html:not(.dark) .bg-black\/30{background-color:rgba(0,0,0,.06)!important}
    html:not(.dark) .bg-noir\/70{background-color:rgba(15,17,23,.06)!important}
    html:not(.dark) .ring-white\/10{--tw-ring-color:rgba(0,0,0,.08)!important}
    @media (prefers-reduced-motion:reduce){
      .aurora,.blob{animation:none!important}
      .tilt,.magnetic{transition:none!important}
      .cursor,.spotlight::after{display:none!important}
    }
  </style>
</head>

<body class="min-h-screen overflow-x-hidden font-sans">
  <!-- Progress -->
  <div id="progress" class="progress"></div>

  <!-- Scene background -->
  <div aria-hidden="true" class="aurora"></div>
  <div aria-hidden="true" class="blob"></div>
  <div aria-hidden="true" class="blob"></div>

  <!-- Floating nav dots -->
  <aside class="fixed right-5 top-1/2 z-50 -translate-y-1/2 hidden md:flex flex-col gap-3">
    <a href="#top"        class="dot" data-dot="top"        title="Top"></a>
    <a href="#overview"   class="dot" data-dot="overview"   title="Intro"></a>
    <a href="#dataset"    class="dot" data-dot="dataset"    title="Dataset"></a>
    <a href="#models"     class="dot" data-dot="models"     title="Models"></a>
    <a href="#results"    class="dot" data-dot="results"    title="Results"></a>
    <a href="#contact"    class="dot" data-dot="contact"    title="Contact"></a>
  </aside>

  <!-- Header -->
  <header id="siteHeader" class="hide-on-scroll fixed inset-x-0 top-0 z-40">
    <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
      <div class="mt-3 rounded-2xl border border-white/20 dark:border-white/10 
                  bg-white/70 dark:bg-slate-900/60 backdrop-blur-12 shadow-soft">
        <nav class="flex items-center justify-between px-4 py-3">
          <!-- Logo -->
          <a href="index.html#home" class="font-display text-lg tracking-tight">
            Ayush <span class="text-brand-600">Shah</span>
          </a>
  
          <!-- Primary nav (always points to index sections) -->
          <ul class="hidden md:flex items-center gap-6 text-sm">
            <li><a href="index.html#projects"   class="u-underline">Projects</a></li>
            <li><a href="index.html#experience" class="u-underline">Experience</a></li>
            <li><a href="index.html#skills"     class="u-underline">Skills</a></li>
            <li><a href="index.html#education"  class="u-underline">Education</a></li>
            <li><a href="index.html#about"      class="u-underline">About</a></li>
          </ul>
  
          <!-- Right-side buttons -->
          <div class="flex items-center gap-2">
            <!-- Theme toggle -->
            <button id="themeToggle" aria-label="Toggle theme"
              class="inline-flex items-center justify-center gap-2 rounded-xl
                     px-4 py-2 text-sm font-display font-semibold
                     bg-slate-900/90 dark:bg-slate-800/80 text-white
                     border border-white/10 hover:bg-slate-800/90 hover:dark:bg-slate-700
                     shadow-soft transition-all">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none"
                   class="sun stroke-current">
                <path d="M12 4V2M12 22v-2M4.93 4.93 3.52 3.52M20.48 20.48l-1.41-1.41M22 12h-2M4 12H2M19.07 4.93l1.41-1.41M3.52 20.48l1.41-1.41"
                      stroke-width="1.5" stroke-linecap="round"/>
                <circle cx="12" cy="12" r="4" stroke-width="1.5"/>
              </svg>
              <span>Theme</span>
            </button>
  
            <!-- Let’s talk → always main contact section -->
            <a href="index.html#contact"
               class="inline-flex items-center justify-center gap-2 rounded-xl
                      px-4 py-2 text-sm font-display font-semibold
                      bg-brand-600 hover:bg-brand-700 text-white shadow-soft
                      transition-all">
              Let’s talk
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                <path d="M5 12h14m0 0-6-6m6 6-6 6"
                      stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
              </svg>
            </a>
          </div>
        </nav>
      </div>
    </div>
  </header>
  

  <main id="top" class="pt-24 lg:pt-28 relative z-10">
    <!-- HERO -->
    <section class="container mx-auto px-4 lg:px-8">
      <div class="rounded-3xl border border-white/10 bg-black/30 p-6 lg:p-10 shadow-glow spotlight">
        <div class="grid gap-10 lg:grid-cols-12">
          <div class="lg:col-span-7">
            <h1 class="text-4xl md:text-5xl font-extrabold leading-tight tracking-tight">
              Lyrics-Based <span style="color:var(--ac1)">Search Ranking</span>
            </h1>
            <p class="mt-4 text-lg md:max-w-2xl" style="color:var(--text-soft)">
              Evaluated traditional IR and deep semantic models for lyrics retrieval on a 50k-song corpus,
              focusing on ranking quality for incomplete and paraphrased queries.
            </p>
            <div class="mt-6 flex flex-wrap gap-3">
              <a href="#overview" class="magnetic inline-flex items-center gap-2 rounded-xl border border-white/10 bg-white/10 px-4 py-2 text-sm hover:bg-white/20">
                <i class="fa-solid fa-magnifying-glass"></i> Read intro
              </a>
              <a href="#results" class="magnetic inline-flex items-center gap-2 rounded-xl border border-white/10 bg-white/5 px-4 py-2 text-sm hover:bg-white/10">
                <i class="fa-regular fa-chart-bar"></i> View results
              </a>
              <a href="https://drive.google.com/file/d/12cguO9Xe0VMYtyFlYJLte8PpGHzJ43IG/view?usp=drive_link"
                 target="_blank"
                 class="magnetic inline-flex items-center gap-2 rounded-lg bg-white/10 px-3 py-2 text-sm hover:bg-white/20">
                <i class="fa-regular fa-file-lines"></i> Full report
              </a>
            </div>

            <!-- Chips -->
            <div class="mt-8 rounded-2xl border border-white/10 bg-noir/70 p-3">
              <div class="flex flex-wrap gap-2">
                <span class="rounded-full bg-white/5 px-3 py-1 text-xs text-white/80 ring-1 ring-white/10">Information Retrieval</span>
                <span class="rounded-full bg-white/5 px-3 py-1 text-xs text-white/80 ring-1 ring-white/10">BM25 / TF-IDF / LSA</span>
                <span class="rounded-full bg-white/5 px-3 py-1 text-xs text-white/80 ring-1 ring-white/10">Siamese BERT</span>
                <span class="rounded-full bg-white/5 px-3 py-1 text-xs text-white/80 ring-1 ring-white/10">MAP / NDCG</span>
              </div>
            </div>
          </div>

          <!-- Visual -->
          <div class="lg:col-span-5">
            <div class="tilt relative rounded-2xl border border-white/10 bg-white/5 p-5">
              <div class="sheen"></div>
              <div class="aspect-[16/10] overflow-hidden rounded-xl relative">
                <img src="LyricsBased.png"
                     alt="Lyrics-based search ranking dashboard mockup"
                     class="h-full w-full object-cover opacity-95" />
                <div class="pointer-events-none absolute inset-0 bg-gradient-to-t from-black/35 to-transparent"></div>
                <div class="absolute bottom-4 left-4 inline-flex items-center gap-2 rounded-lg bg-black/55 px-3 py-1.5 text-xs ring-1 ring-white/10">
                  <i class="fa-solid fa-music"></i> Query → Ranked tracks
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Quick tiles -->
        <div class="mt-8 grid gap-4 sm:grid-cols-2 lg:grid-cols-4">
          <div class="tilt relative rounded-xl bg-white/5 p-4 ring-1 ring-white/10">
            <div class="sheen"></div>
            <p class="text-xs text-white/60">Corpus</p>
            <p class="mt-1 text-xl font-display font-semibold">50k songs</p>
          </div>
          <div class="tilt relative rounded-xl bg-white/5 p-4 ring-1 ring-white/10">
            <div class="sheen"></div>
            <p class="text-xs text-white/60">Queries</p>
            <p class="mt-1 text-xl font-display font-semibold">1k labeled pairs</p>
          </div>
          <div class="tilt relative rounded-xl bg-white/5 p-4 ring-1 ring-white/10">
            <div class="sheen"></div>
            <p class="text-xs text-white/60">Metrics</p>
            <p class="mt-1 text-xl font-display font-semibold">MAP & NDCG</p>
          </div>
          <div class="tilt relative rounded-xl bg-white/5 p-4 ring-1 ring-white/10">
            <div class="sheen"></div>
            <p class="text-xs text-white/60">Outcome</p>
            <p class="mt-1 text-xl font-display font-semibold">Siamese BERT wins</p>
          </div>
        </div>
      </div>
    </section>

    <!-- INTRO -->
    <section id="overview" class="container mx-auto px-4 lg:px-8 mt-12">
      <div class="rounded-3xl border border-white/10 bg-black/30 p-6 lg:p-10">
        <div class="flex items-center gap-3">
          <h2 class="text-3xl font-display font-semibold"> Introduction</h2>
          <span class="text-sm px-2 py-0.5 rounded bg-white/10 ring-1 ring-white/10">Lyrics retrieval problem</span>
        </div>
        <p class="mt-4 text-white/80">
          Searching songs with half-remembered or paraphrased lyrics is a retrieval problem that breaks naive keyword match.
          This project benchmarks ranking models for lyrics-based search - not just building a UI, but measuring how well
          different models surface the right track at the top of the list.
        </p>
        <p class="mt-4 text-white/80">
          Using a 50,000-song Genius-based corpus and manually labeled query–document relevance pairs, we compare classical
          IR methods against deep architectures with semantic awareness.
        </p>
      </div>
    </section>

    <!-- DATASET -->
    <section id="dataset" class="container mx-auto px-4 lg:px-8 mt-12">
      <div class="rounded-3xl border border-white/10 bg-black/30 p-6 lg:p-10">
        <div class="flex items-center gap-3">
          <h2 class="text-3xl font-display font-semibold"> Dataset & Preprocessing</h2>
          <span class="text-sm px-2 py-0.5 rounded bg-white/10 ring-1 ring-white/10">50k tracks · 1k labels</span>
        </div>
        <p class="mt-4 text-white/80">
          The dataset contains ~50,000 songs with lyrics and metadata (artist, album, release date). For evaluation,
          1,000 query–song pairs were labeled with graded relevance scores (1–5), enabling MAP and NDCG computation.
        </p>
        <ul class="mt-4 list-disc pl-6 space-y-2" style="color:var(--text-soft)">
          <li><strong>Regex tokenization</strong> tuned for lyrics (punctuation, repeated hooks, slang).</li>
          <li><strong>Stopword & noise filtering</strong> to reduce non-informative tokens.</li>
          <li><strong>Metadata structuring</strong> for artist/album/genre-aware analysis.</li>
        </ul>
      </div>
    </section>

    <!-- MODELS -->
    <section id="models" class="container mx-auto px-4 lg:px-8 mt-12">
      <div class="rounded-3xl border border-white/10 bg-black/30 p-6 lg:p-10">
        <div class="flex items-center gap-3">
          <h2 class="text-3xl font-display font-semibold"> Ranking Models Evaluated</h2>
          <span class="text-sm px-2 py-0.5 rounded bg-white/10 ring-1 ring-white/10">Lexical vs Semantic</span>
        </div>

        <div class="mt-6 grid gap-8 lg:grid-cols-2">
          <!-- Traditional -->
          <div class="spotlight rounded-2xl bg-white/5 p-5 ring-1 ring-white/10">
            <h3 class="text-lg font-display font-semibold">Traditional IR</h3>
            <ul class="mt-3 list-disc pl-6 space-y-2" style="color:var(--text-soft)">
              <li><strong>BM25</strong> -  term-frequency and length-normalized scoring.</li>
              <li><strong>TF-IDF</strong> -  classic vector-space weighting for lyrics.</li>
              <li><strong>Pivoted Normalization</strong> -  alternative length normalization.</li>
              <li><strong>WordCount Cosine</strong> -  cosine similarity over term-count vectors.</li>
            </ul>
          </div>

          <!-- Deep / semantic -->
          <div class="rounded-2xl bg-white/5 p-5 ring-1 ring-white/10">
            <h3 class="text-lg font-display font-semibold">Semantic / Deep Models</h3>
            <ul class="mt-3 list-disc pl-6 space-y-2" style="color:var(--text-soft)">
              <li><strong>Siamese BERT</strong> -  dual-encoder embeddings for query and lyrics, strong on paraphrases.</li>
              <li><strong>Latent Semantic Analysis (LSA)</strong> -  SVD-based low-rank semantic space.</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- RESULTS -->
    <section id="results" class="container mx-auto px-4 lg:px-8 mt-12">
      <div class="rounded-3xl border border-white/10 bg-black/30 p-6 lg:p-10">
        <h2 class="text-3xl font-display font-semibold"> Evaluation & Results</h2>
        <p class="mt-2 text-white/70">
          Models are evaluated with Mean Average Precision (MAP) and NDCG, emphasizing correct ranking of highly relevant songs.
        </p>

        <div class="mt-6 overflow-x-auto">
          <table class="min-w-full text-sm border border-white/10 rounded-xl overflow-hidden">
            <thead class="bg-white/5 text-white/90">
              <tr>
                <th class="px-4 py-2 text-left">Ranker</th>
                <th class="px-4 py-2 text-left">MAP</th>
                <th class="px-4 py-2 text-left">NDCG</th>
              </tr>
            </thead>
            <tbody class="text-white/80">
              <tr class="border-t border-white/10">
                <td class="px-4 py-2">BM25</td>
                <td class="px-4 py-2">0.2566</td>
                <td class="px-4 py-2">0.0269</td>
              </tr>
              <tr class="border-t border-white/10">
                <td class="px-4 py-2">TF-IDF</td>
                <td class="px-4 py-2">0.4268</td>
                <td class="px-4 py-2">0.0488</td>
              </tr>
              <tr class="border-t border-white/10">
                <td class="px-4 py-2">WordCount Cosine</td>
                <td class="px-4 py-2">0.3883</td>
                <td class="px-4 py-2">0.0357</td>
              </tr>
              <tr class="border-t border-white/10 bg-white/5/">
                <td class="px-4 py-2 font-display font-semibold">Siamese BERT</td>
                <td class="px-4 py-2 font-display font-semibold">0.4972</td>
                <td class="px-4 py-2 font-display font-semibold">0.0704</td>
              </tr>
              <tr class="border-t border-white/10">
                <td class="px-4 py-2">LSA</td>
                <td class="px-4 py-2">0.3457</td>
                <td class="px-4 py-2">0.0488</td>
              </tr>
            </tbody>
          </table>
        </div>

        <h3 class="mt-8 text-xl font-display font-semibold">Key Findings</h3>
        <ul class="mt-3 list-disc pl-6 text-sm text-white/80 space-y-2">
          <li><strong>Siamese BERT</strong> dominates on MAP and NDCG -  semantic encoding is essential for paraphrased queries.</li>
          <li><strong>TF-IDF</strong> beats BM25 on this corpus, reflecting lyrics-specific token distribution and length behavior.</li>
          <li><strong>BM25</strong> underperforms when queries diverge from exact lyric phrasing.</li>
        </ul>

        <div class="mt-8 text-center">
          <a href="https://drive.google.com/file/d/12cguO9Xe0VMYtyFlYJLte8PpGHzJ43IG/view?usp=drive_link"
             target="_blank"
             class="inline-flex items-center gap-2 rounded-xl bg-white/10 px-5 py-3 text-sm ring-1 ring-white/10 hover:bg-white/20">
            <i class="fa-regular fa-file-alt"></i> View full report
          </a>
        </div>
      </div>
    </section>

    <!-- CONTACT -->
    <section id="contact" class="container mx-auto px-4 lg:px-8 mt-12 mb-10">
      <div class="rounded-3xl border border-white/10 bg-black/30 p-6 lg:p-10">
        <h2 class="text-3xl font-display font-semibold">Say hi</h2>
        <p class="mt-2 text-white/70">
          Happy to dive into ranking pipeline design, evaluation methodology, or adapting this setup to real music search products.
        </p>
        <div class="mt-6 flex flex-wrap gap-3">
          <a class="magnetic inline-flex items-center gap-2 rounded-xl bg-white/10 px-4 py-2 text-sm hover:bg-white/20"
             href="mailto:ayush@example.com">
            <i class="fa-regular fa-envelope"></i> Email
          </a>
          <a class="magnetic inline-flex items-center gap-2 rounded-xl bg-white/10 px-4 py-2 text-sm hover:bg-white/20"
             href="https://github.com/ayushshah1601" target="_blank">
            <i class="fa-brands fa-github"></i> GitHub
          </a>
        </div>
      </div>
    </section>
  </main>

  <footer class="border-t border-white/10 bg-black/30 py-8">
    <div class="container mx-auto px-4 lg:px-8 text-center text-sm text-white/60">
      © 2025 Ayush Shah · Lyrics-Based Search Ranking
    </div>
  </footer>

  <!-- Cursor bead -->
  <div id="cursor" class="cursor" aria-hidden="true"></div>

  <script>
    // Spotlight tracking
    document.querySelectorAll('.spotlight').forEach(el => {
      el.addEventListener('mousemove', e => {
        const r = el.getBoundingClientRect();
        el.style.setProperty('--sx', (e.clientX - r.left) + 'px');
        el.style.setProperty('--sy', (e.clientY - r.top) + 'px');
      });
    });

    // Tilt cards
    document.querySelectorAll('.tilt').forEach(card => {
      let raf;
      card.addEventListener('mousemove', e => {
        const r = card.getBoundingClientRect();
        const x = (e.clientX - r.left)/r.width - .5;
        const y = (e.clientY - r.top)/r.height - .5;
        const rx = (-y*10).toFixed(2), ry = (x*12).toFixed(2);
        cancelAnimationFrame(raf);
        raf = requestAnimationFrame(
          () => card.style.transform = `perspective(900px) rotateX(${rx}deg) rotateY(${ry}deg)`
        );
      });
      card.addEventListener('mouseleave', () => {
        card.style.transform = 'perspective(900px) rotateX(0) rotateY(0)';
      });
    });

    // Magnetic buttons
    document.querySelectorAll('.magnetic').forEach(btn => {
      let raf;
      btn.addEventListener('mousemove', e => {
        const r = btn.getBoundingClientRect();
        const dx = (e.clientX - (r.left + r.width/2)) * 0.12;
        const dy = (e.clientY - (r.top  + r.height/2)) * 0.12;
        cancelAnimationFrame(raf);
        raf = requestAnimationFrame(
          () => btn.style.transform = `translate(${dx}px, ${dy}px)`
        );
      });
      btn.addEventListener('mouseleave', () => {
        btn.style.transform = 'translate(0,0)';
      });
    });

    // Parallax cards
    document.querySelectorAll('.parallax').forEach(el => {
      let raf;
      el.addEventListener('mousemove', e => {
        const r = el.getBoundingClientRect();
        const x = (e.clientX-r.left)/r.width - .5;
        const y = (e.clientY-r.top)/r.height - .5;
        cancelAnimationFrame(raf);
        raf = requestAnimationFrame(
          () => el.style.transform = `translate3d(${x*8}px, ${y*8}px, 0)`
        );
      });
      el.addEventListener('mouseleave', () => {
        el.style.transform = 'translate3d(0,0,0)';
      });
    });

    // Scroll progress + nav dots
    const progress = document.getElementById('progress');
    const dots = document.querySelectorAll('.dot');
    const sections = ['top','overview','dataset','models','results','contact']
      .map(id => document.getElementById(id) || document.querySelector('#'+id));

    function onScroll() {
      const s = window.scrollY;
      const h = document.body.scrollHeight - innerHeight;
      progress.style.width = Math.min(100, (s/h)*100) + '%';

      let active = 0;
      sections.forEach((sec, i) => {
        if (!sec) return;
        const y = sec.getBoundingClientRect().top;
        if (y < innerHeight * 0.4) active = i;
      });

      dots.forEach(d => d.classList.remove('active'));
      const key = sections[active]?.id || 'top';
      const dot = document.querySelector(`[data-dot="${key}"]`);
      if (dot) dot.classList.add('active');
    }
    addEventListener('scroll', onScroll, { passive:true });
    onScroll();

    // Cursor bead
    const bead = document.getElementById('cursor');
    let cx = 0, cy = 0, tx = 0, ty = 0;
    const lerp = (a,b,t) => a + (b-a)*t;
    function loop() {
      cx = lerp(cx, tx, .18);
      cy = lerp(cy, ty, .18);
      bead.style.left = cx + 'px';
      bead.style.top = cy + 'px';
      requestAnimationFrame(loop);
    }
    addEventListener('mousemove', e => {
      tx = e.clientX;
      ty = e.clientY;
    }, { passive:true });
    loop();

    // Theme init + toggle
    (function initTheme(){
      const saved = localStorage.getItem('theme');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      const root = document.documentElement;
      if (saved === 'dark' || (!saved && prefersDark)) root.classList.add('dark');
      else root.classList.remove('dark');
    })();
    document.getElementById('themeToggle')?.addEventListener('click', () => {
      const root = document.documentElement;
      const isDark = root.classList.toggle('dark');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      const meta = document.querySelector('meta[name="color-scheme"]');
      if (meta) meta.setAttribute('content', isDark ? 'dark light' : 'light dark');
    });
  </script>
</body>
</html>
